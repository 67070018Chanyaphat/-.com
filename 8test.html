<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f5f5f5;
        }
        #word {
            font-size: 24px;
            margin: 20px;
        }
        #hangman {
            font-size: 60px;
            margin: 20px;
        }
        input {
            font-size: 20px;
        }
    </style>
</head>
<body>

    <h1>Hangman Game</h1>
    <div id="hangman"></div>
    <div id="word"></div>
    <input type="text" id="guess" maxlength="1" placeholder="Guess a letter" />
    <br>
    <button onclick="makeGuess()">Guess</button>
    <br>
    <div id="message"></div>
    <div id="hint" style="margin-top: 20px;"></div>

    <script>
        const questions = [
            {
                hint: "อุปกรณ์ที่ทำงานภายใต้ชุดคำสั่ง เรียกว่า",
                answer: "software"
            },
            {
                hint: "การเก็บข้อมูลระยะสั้นจะเก็บไว้ที่ไหน",
                answer: "memory"
            },
            {
                hint: "การจัดเก็บข้อมูลที่ใช้ในการประมวลผล เรียกว่า",
                answer: "database"
            },
            {
                hint: "ภาษาที่ใช้ในการสร้างเว็บไซต์คือ",
                answer: "html"
            }
        ];

        let chosenWord;
        let guessedLetters = [];
        let tries = 6;
        let wordCompletion = '';
        let usedQuestions = [];

        function getRandomQuestion() {
            if (usedQuestions.length === questions.length) {
                // Reset usedQuestions if all questions have been used
                usedQuestions = [];
            }

            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * questions.length);
            } while (usedQuestions.includes(randomIndex));

            usedQuestions.push(randomIndex);
            return questions[randomIndex];
        }

        function startGame() {
            const question = getRandomQuestion();
            chosenWord = question.answer;
            wordCompletion = '_'.repeat(chosenWord.length);
            guessedLetters = [];
            tries = 6;

            document.getElementById('hint').innerText = question.hint;
            displayHangman();
            displayWord();
            document.getElementById('message').innerText = '';
        }

        function displayHangman() {
            const stages = [
                '',
                'O',
                'O\n/',
                'O\n/|',
                'O\n/|\\',
                'O\n/|\\\n/',
                'O\n/|\\\n/ \\'
            ];
            document.getElementById('hangman').innerText = stages[6 - tries];
        }

        function displayWord() {
            document.getElementById('word').innerText = wordCompletion.split('').join(' ');
        }

        function makeGuess() {
            const guessInput = document.getElementById('guess');
            const guess = guessInput.value.toLowerCase();
            guessInput.value = '';

            if (guessedLetters.includes(guess)) {
                document.getElementById('message').innerText = "You already guessed that letter.";
                return;
            }
            guessedLetters.push(guess);

            if (chosenWord.includes(guess)) {
                const wordArray = wordCompletion.split('');
                for (let i = 0; i < chosenWord.length; i++) {
                    if (chosenWord[i] === guess) {
                        wordArray[i] = guess;
                    }
                }
                wordCompletion = wordArray.join('');
            } else {
                tries--;
            }

            displayHangman();
            displayWord();
            checkGameStatus();
        }

        function checkGameStatus() {
            if (tries <= 0) {
                document.getElementById('message').innerText = `Game Over! The word was "${chosenWord}".`;
                showNextQuestion();
            } else if (!wordCompletion.includes('_')) {
                document.getElementById('message').innerText = "Congratulations! You guessed the word!";
                showNextQuestion();
            }
        }

        function showNextQuestion() {
            if (usedQuestions.length < questions.length) {
                startGame();
            } else {
                document.getElementById('message').innerText = "You've completed all questions!";
                document.getElementById('hint').innerText = '';
            }
        }

        // Start the game
        startGame();
    </script>

</body>
</html>
